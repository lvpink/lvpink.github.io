<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>伟大孤独棋</title>
</head>
<style type="text/css">
    /*渲染*/
    .allNum{
        background-color: #FD3755;
        border:solid;
        color: #FD3755;
        padding: 0;
        text-align: center;
        border-radius: 50%;
        width: 100px;
        height: 100px;
    }
    .zero{
        border: none;
        padding: 0;
    }
    .bdGround{
        background-color: #9592C2;
    }
</style>
<body class="bdGround">
<div style="background-color: aquamarine;">
    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="red" size="4">Lonely chess</font>在马达加斯加很有名的一种游戏,叫孤独棋. 光听名字就觉得挺神奇的,
        这种孤独棋是由一种被当地人称作“巴里桑”的硬木做成的棋盘，盘上刻有37个小坑（棋子位）和39颗（两颗备用）球状的五彩矿石做成的棋子组成。
        “巴里桑”的质地密度很高，干透的木块放在水里也会沉没。每颗彩色的棋子都是马达加斯加一种常见的富产矿石。棋盘和棋子的大小规格多样。
        我所见到的最小的棋盘只有巴掌大，而大的要用两只手抱起棋子移动。据当地华侨介绍，他们曾赠送给国务委员吴仪一盘大孤独棋，她非常喜欢
        ，经常在家里“搬运棋子”，权当锻炼身体了。</p>

    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="crimson" >孤独棋</font>的玩法很简单，就是“跳跃取子”。一开始，先随意取出盘上的任意一颗棋子，
        然后将相邻的棋子依次横向或纵向（不可斜向）跳过另外一颗棋子并将它放在空位上，
        每跳一次就将被它跳过的那颗棋子取出。就这样一直走下去，走到不能再跳了为止。
    </p>
</div>
<table align="center">
    <tr>
        <td class="zero"></td>
        <td class="zero"></td>
        <td class="allNum" id="2.7d">2.7</td>
        <td class="allNum" id="3.7d">3.7</td>
        <td class="allNum" id="4.7d">4.7</td>
        <td class="zero"></td>
        <td class="zero"></td>
    </tr><tr>
    <td class="zero"></td>
    <td class="allNum" id="1.6d">1.6</td>
    <td class="allNum" id="2.6d">2.6</td>
    <td class="allNum" id="3.6d">3.6</td>
    <td class="allNum" id="4.6d">4.6</td>
    <td class="allNum" id="5.6d">5.6</td>
    <td class="zero"></td>
</tr><tr>
    <td class="allNum" id="0.5d">0.5</td>
    <td class="allNum" id="1.5d">1.5</td>
    <td class="allNum" id="2.5d">2.5</td>
    <td class="allNum" id="3.5d">3.5</td>
    <td class="allNum" id="4.5d">4.5</td>
    <td class="allNum" id="5.5d">5.5</td>
    <td class="allNum" id="6.5d">6.5</td>
</tr><tr>
    <td class="allNum" id="0.4d">0.4</td>
    <td class="allNum" id="1.4d">1.4</td>
    <td class="allNum" id="2.4d">2.4</td>
    <td class="allNum" id="3.4d">3.4</td>
    <td class="allNum" id="4.4d">4.4</td>
    <td class="allNum" id="5.4d">5.4</td>
    <td class="allNum" id="6.4d">6.4</td>
</tr><tr>
    <td class="allNum" id="0.3d">0.3</td>
    <td class="allNum" id="1.3d">1.3</td>
    <td class="allNum" id="2.3d">2.3</td>
    <td class="allNum" id="3.3d">3.3</td>
    <td class="allNum" id="4.3d">4.3</td>
    <td class="allNum" id="5.3d">5.3</td>
    <td class="allNum" id="6.3d">6.3</td>
</tr><tr>
    <td class="zero"></td>
    <td class="allNum" id="1.2d">1.2</td>
    <td class="allNum" id="2.2d">2.2</td>
    <td class="allNum" id="3.2d">3.2</td>
    <td class="allNum" id="4.2d">4.2</td>
    <td class="allNum" id="5.2d">5.2</td>
    <td class="zero"></td>
</tr><tr>
    <td class="zero"></td>
    <td class="zero"></td>
    <td class="allNum" id="2.1d">2.1</td>
    <td class="allNum" id="3.1d">3.1</td>
    <td class="allNum" id="4.1d">4.1</td>
    <td class="zero"></td>
    <td class="zero"></td>
</tr>
</table>
<div style="background-color: aquamarine;">
    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这是一种真正的“孤独者的游戏”，无所谓是“输”或是“赢”。它的最高境界是到最后，棋盘上仅剩下一颗棋子。据说这颗棋子还应该就在开始时第一个被取出棋子的空位上。
        规则简单，但要达到至高境界却不容易。要成为真正的孤独者——盘上只剩一颗子，已经是非常困难了，而要不迷失自己且经过孤独的修行最终找回自我——最后一颗子回到开始的空位上，怕是难上加难了。
        马达加斯加人虽然喜欢热闹，但更享受孤独与宁静。孤独棋是他们传说中的一位高原上的智者创造的。这和马国人平和温良的性格非常吻合。街道上极少有交通灯或警察，
        但不管是最破旧的汽车还是最新款的“靓车”都相互礼让，秩序井然；若你喝斥了乞丐，他会先向您鞠躬然后微笑着离去；马国也有过“政变”或“革命”，但没有流过血……。虽说也是非洲国家，
        但他们与非洲大陆截然不同。从人种及肤色上看，他们更接近南印度或巴基斯坦人。在地理上有一种说法，马达加斯加岛是从印度半岛“漂移”过来的。
    </p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;据说法国人很喜欢孤独棋，从十七世纪路易十四王朝开始它就已在法国广为流行。马国历史上大部分时间都是法属殖民地，法语是其官方语言。
        到处都有法国人留下的“烙印”，从建筑到生活方式，甚至混血儿。岛上到处都有法国人的酒店、俱乐部和“避世度假村”。也许法国人的浪漫在原始宁静的马达加斯加找到了自己的归宿吧？
        “孤独棋”算是一个？还有离塔马塔夫100公里处的“避世度假村”是另一个？</p>
</div>
<script>
    //附加点击事件
    var allNums = document.getElementsByClassName("allNum");
    for(var i=0;i<allNums.length;i++){
        var onc = allNums[i];
        onc.onclick =clickCell;
    }
    //初始化
    var a = [0,0];
	//初始化方向
	var b = [false,false];
    //开始选择标志
    var iniflag = true;
    //点击方法体
    function clickCell(){
        if(iniflag){
            this.innerText = "";
            this.style.color = "#7C188D";
            this.style.backgroundColor = "#7C188D"
            iniflag = false;
            alert("开始挑战!");
            return;
        }
	
		var rgb = this.style.color;
	    if(a[1]==0&&rgb.substring(4,7).toString()=="157"){
			a = [0,0];
			return;
		}
		
		
        //落点位置a[0]
        var idNum = parseFloat(this.id.substring(0,this.id.length-1))*10;
        if(a[0]==0&&a[1]==0){
            //起始位置
            a[1] = this.innerText*10;
        }else if(a[1]!=0&&a[0]==0&&
            (idNum==a[1]+20||a[1]==idNum+20||
                idNum==a[1]+2||a[1]==idNum+2)){
            //落点位置
            a[0]=idNum;
        }else if(a[1]!=0&&a[0]==0&&idNum!=a[1]+20&&a[1]!=idNum+20
            &&idNum!=a[1]+2&&a[1]!=idNum+2){
            //非规则选择，重置
            a=[0,0];
        }
		console.log(a[0]);
		console.log(a[1]);
		console.log(idNum);
        //x正方向->落点
        if(a[1]==idNum+20){
			var mid = a[0]/10+1
			console.log(mid+"==zheng====")
			if(clickMid(mid)){
				a=[0,0];
				return;
			}
            putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]-10)/10);
        }
        //x负方向->落点
        if(a[0]==a[1]+20){
			var mid = a[1]/10+1
			console.log(mid+"====fu==")
			if(clickMid(mid)){
				a=[0,0];
				return;
			}
            putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]+10)/10);
        }
        //y负方向->落点
        if(idNum==a[1]+2){
			var mid = (a[1]+1)/10
			console.log(mid+"===Y=fu==")
			if(clickMid(mid)){
				a=[0,0];
				return;
			}
            putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]+1)/10);
        }
        //y正方向->落点
        if(a[1]==idNum+2){
			var mid = (a[0]+1)/10
			console.log(mid+"====Yfu==")
			if(clickMid(mid)){
				a=[0,0];
				return;
			}
            putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]-1)/10);
        }
    }
	
    //传参
    var putParamToMakeColorAndContext = function(a0,a1,p){
        makeColorAndContext(a0,a0,"#FD3755");
        makeColorAndContext(a1,"","#9DC789");
        makeColorAndContext(p,"","#9DC789");
		//如果起始位置不是红色，重置
		 // document.getElementById(a1).attr("disabled","disabled");
		 // document.getElementById(p).attr("disabled","disabled");
        a=[0,0];
    }
    //渲染
    var makeColorAndContext= function(a,txts,cols){
        document.getElementById(a+"d").innerText = txts;
        document.getElementById(a+"d").style.color = cols;
        document.getElementById(a+"d").style.backgroundColor = cols;
    }
	//合法校验
	function clickMid(id){
		var rgb = document.getElementById(id+"d").style.color;
		if(rgb.substring(4,7).toString()=="157"){
			return true;
		}
		
	}
</script>
</body>
</html>
