<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>伟大孤独棋</title>
	</head>
	<style type="text/css">
		/*渲染*/
		.allNum{
			background-color: #FD3755;
			border:solid;
			color: #FD3755;
			padding: 0;
			text-align: center;
			border-radius: 50%;
			width: 30px;
			height: 30px;
		}
		.zero{
			border: none;
			padding: 0;	
		}
		.bdGround{
			background-color: #9592C2;
		}
	</style>
	<body class="bdGround">
		<table align="center">
			<tr>
				<td class="zero"></td>
				<td class="zero"></td>
				<td class="allNum" id="2.7d">2.7</td>
				<td class="allNum" id="3.7d">3.7</td>
				<td class="allNum" id="4.7d">4.7</td>
				<td class="zero"></td>
				<td class="zero"></td>
			</tr><tr>
				<td class="zero"></td>
				<td class="allNum" id="1.6d">1.6</td>
				<td class="allNum" id="2.6d">2.6</td>
				<td class="allNum" id="3.6d">3.6</td>
				<td class="allNum" id="4.6d">4.6</td>
				<td class="allNum" id="5.6d">5.6</td>
				<td class="zero"></td>
			</tr><tr>
				<td class="allNum" id="0.5d">0.5</td>
				<td class="allNum" id="1.5d">1.5</td>
				<td class="allNum" id="2.5d">2.5</td>
				<td class="allNum" id="3.5d">3.5</td>
				<td class="allNum" id="4.5d">4.5</td>
				<td class="allNum" id="5.5d">5.5</td>
				<td class="allNum" id="6.5d">6.5</td>
			</tr><tr>
				<td class="allNum" id="0.4d">0.4</td>
				<td class="allNum" id="1.4d">1.4</td>
				<td class="allNum" id="2.4d">2.4</td>
				<td class="allNum" id="3.4d">3.4</td>
				<td class="allNum" id="4.4d">4.4</td>
				<td class="allNum" id="5.4d">5.4</td>
				<td class="allNum" id="6.4d">6.4</td>
			</tr><tr>
				<td class="allNum" id="0.3d">0.3</td>
				<td class="allNum" id="1.3d">1.3</td>
				<td class="allNum" id="2.3d">2.3</td>
				<td class="allNum" id="3.3d">3.3</td>
				<td class="allNum" id="4.3d">4.3</td>
				<td class="allNum" id="5.3d">5.3</td>
				<td class="allNum" id="6.3d">6.3</td>
			</tr><tr>
				<td class="zero"></td>
				<td class="allNum" id="1.2d">1.2</td>
				<td class="allNum" id="2.2d">2.2</td>
				<td class="allNum" id="3.2d">3.2</td>
				<td class="allNum" id="4.2d">4.2</td>
				<td class="allNum" id="5.2d">5.2</td>
				<td class="zero"></td>
			</tr><tr>
				<td class="zero"></td>
				<td class="zero"></td>
				<td class="allNum" id="2.1d">2.1</td>
				<td class="allNum" id="3.1d">3.1</td>
				<td class="allNum" id="4.1d">4.1</td>
				<td class="zero"></td>
				<td class="zero"></td>
			</tr>
		</table>
		<script>
			//附加点击事件
			var allNums = document.getElementsByClassName("allNum");
			for(var i=0;i<allNums.length;i++){
					var onc = allNums[i];
					onc.onclick =clickCell;
				}
			//初始化
			var a = [0,0];
			//开始选择标志
			var iniflag = true;
			//点击方法体
			function clickCell(){
				if(iniflag){
					this.innerText = "";
					this.style.color = "#7C188D";
					this.style.backgroundColor = "#7C188D"
					iniflag = false;
					alert("开始挑战!");
					return;
				}
				//落点位置a[0]
				var idNum = parseFloat(this.id.substring(0,this.id.length-1))*10;
				if(a[0]==0&&a[1]==0){
					//起始位置
					a[1] = this.innerText*10;
				}else if(a[1]!=0&&a[0]==0&&
						(idNum==a[1]+20||a[1]==idNum+20||
						idNum==a[1]+2||a[1]==idNum+2)){
							//落点位置
							a[0]=idNum;
				}else if(a[1]!=0&&a[0]==0&&idNum!=a[1]+20&&a[1]!=idNum+20
						&&idNum!=a[1]+2&&a[1]!=idNum+2){
							//非规则选择，重置
							a=[0,0];
				}
				//x正方向->落点
				if(a[1]==idNum+20){
					putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]-10)/10);
				}
				//x负方向->落点
				if(a[0]==a[1]+20){
					putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]+10)/10);
				}
				//y负方向->落点
				if(idNum==a[1]+2){
					putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]+1)/10);
				}
				//y正方向->落点
				if(a[1]==idNum+2){
					putParamToMakeColorAndContext(a[0]/10,a[1]/10,(a[1]-1)/10);
				}	
			}
			//传参
			var putParamToMakeColorAndContext = function(a0,a1,p){
				makeColorAndContext(a0,a0,"#FD3755");
				makeColorAndContext(a1,"","#9DC789");
				makeColorAndContext(p,"","#9DC789");
				a=[0,0];
			}
			//渲染
			var makeColorAndContext= function(a,txts,cols){
				document.getElementById(a+"d").innerText = txts;
				document.getElementById(a+"d").style.color = cols;
				document.getElementById(a+"d").style.backgroundColor = cols;
			}
		</script>
	</body>
</html>

